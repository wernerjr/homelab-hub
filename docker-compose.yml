services:
  # Uses the shared PostgreSQL container already running on this host:
  #   container: shared-postgres
  #   port: 5432
  homelab-hub:
    build: .
    container_name: homelab-hub
    restart: unless-stopped
    environment:
      - NODE_ENV=production
      - HOST=0.0.0.0
      - PORT=8080
      - STATIC_DIR=/app/backend/public
      - CORS_ORIGIN=http://localhost
      - SERVER_NAME=homelab-hub
      - DATABASE_URL=postgres://promptvault:promptvault@host.docker.internal:5432/promptvault
      - METRICS_MODE=auto
      - DISK_MOUNT=/
    extra_hosts:
      - "host.docker.internal:host-gateway"
    ports:
      - "80:8080"
